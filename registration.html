<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Registration Form</title>
  <link rel="stylesheet" href="registration.css" />
</head>
<body>
  <h1>Registration Form</h1>
  <p>Please fill out this form with the required information</p>
  <form id="registration-form">
    <fieldset>
      <label for="first-name">Enter Your First Name: <input id="first-name" name="first-name" type="text" required /></label>
      <label for="last-name">Enter Your Last Name: <input id="last-name" name="last-name" type="text" required /></label>
    </fieldset>
    <fieldset> 
      <label for="email">Enter Your Email: <input id="email" name="email" type="email" required /></label>
      <label for="phone">Enter Your Phone: <input id="phone" name="phone" type="tel" pattern="[0-9]{10,}" required /></label>
    </fieldset>
    <fieldset>
      <label for="dob">Date of Birth:</label>
      <input type="date" id="dob" name="dob" required>
    </fieldset>
    <fieldset>
      <label for="department">Department:</label>
      <select id="department" name="department" required>
        <option value="">(Select One)</option>
        <option value="Santander">Santander</option>
        <option value="Atlantico">Atlantico</option>
        <option value="Antioquia">Antioquia</option>
        <option value="Cundinamarca">Cundinamarca</option>
        <option value="Valle del Cauca">Valle del Cauca</option>
        <option value="Otro">Otro</option>
      </select>
      <label for="course">Course:</label>
      <select id="course" name="course" required>
        <option value="">(Select One)</option>
        <option value="Cocina">Cocina</option>
        <option value="Peluquería">Peluquería</option>
        <option value="Medios Audiovisuales">Medios Audiovisuales</option>
        <option value="Gestión Empresarial">Gestión Empresarial</option>
        <option value="Otro">Otro</option>
      </select>
    </fieldset>
    <fieldset>
      <label for="profile-id">Upload a file (ID): <input id="profile-id" type="file" name="file" accept=".jpg,.jpeg,.png,.pdf" required/></label>
      <label for="bio">Provide a bio (Optional):
        <textarea id="bio" name="bio" rows="3" cols="30" placeholder="I like being on the beach..."></textarea>
      </label>
    </fieldset>
    <label for="terms-and-conditions">
      <input class="inline" id="terms-and-conditions" type="checkbox" required name="terms-and-conditions" /> I accept the <a href="https://www.freecodecamp.org/news/terms-of-service/">terms and conditions</a>
    </label>
    <input type="submit" value="Submit"/>
  </form>
  
  <script>
    document.getElementById("registration-form").addEventListener("submit", function(event) {
      event.preventDefault(); // Prevents traditional form submission

      // Get and validate field values
      const firstName = document.getElementById("first-name").value.trim();
      const lastName = document.getElementById("last-name").value.trim();
      const email = document.getElementById("email").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const dob = document.getElementById("dob").value;
      const department = document.getElementById("department").value;
      const course = document.getElementById("course").value;
      const bio = document.getElementById("bio").value.trim();
      const profileIdFile = document.getElementById("profile-id").files[0];

      if (!firstName || !lastName || !email || !phone || !profileIdFile) {
        alert("Please fill out all required fields.");
        return;
      }

      // Validate email and phone formats
      const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
      if (!emailPattern.test(email)) {
        alert("Please enter a valid email address.");
        return;
      }

      const phonePattern = /^[0-9]{10}$/;
      if (!phonePattern.test(phone)) {
        alert("Please enter a valid phone number of 10 digits.");
        return;
      }

      // Save user to localStorage
      let users = JSON.parse(localStorage.getItem("users")) || [];
      const newUser = {
        fullName: `${firstName} ${lastName}`,
        email: email,
        phone: phone,
        dob: dob,
        department: department,
        course: course,
        bio: bio,
        profileIdFile: profileIdFile.name // Only stores the filename as a reference
      };
      users.push(newUser);
      localStorage.setItem("users", JSON.stringify(users));

      // Success message and redirection
      alert("Registration successful!");
      window.location.href = "home.html";
    });
  </script>
</body>
</html>
